import{r as l,F as x,H as w,L as y,M as P,N as k,t as f,v as g,x as c,d as C,O as I,P as F,o as $,y as j,Q as i,R as h,S as N,T as R,z as B,_ as S}from"./CY4uA25S.js";const V=["src"],E={__name:"ComicReader",props:{comicId:Number,initialPage:Number,totalPages:Number,visible:Boolean},emits:["update:visible"],setup(_,{emit:p}){const e=_,a=l(null),d=l(""),t=l(e.initialPage);x(()=>{d.value=`/comic/${e.comicId}/${t.value}.jpg`,m()}),w(()=>e.visible,s=>{s?b():v()});function r(s){const{clientX:o}=s,{innerWidth:n}=window;o<n/2?t.value>1?t.value--:t.value=e.totalPages:t.value<e.totalPages?t.value++:t.value=1}function m(){for(let s=1;s<=3;s++){const o=(t.value+s)%e.totalPages||e.totalPages,n=new Image;n.src=`/comic/${e.comicId}/${o}.jpg`}}async function b(){a.value&&a.value.requestFullscreen&&await a.value.requestFullscreen()}async function v(){document.fullscreenElement&&document.exitFullscreen&&(await document.exitFullscreen(),e.visible=!1)}return y(()=>{v()}),(s,o)=>P((f(),g("div",{ref_key:"readerContainer",ref:a,class:"inset-0 flex justify-center items-center select-none",onClick:r},[c("img",{src:d.value,class:"max-w-full max-h-full h-full"},null,8,V)],512)),[[k,_.visible]])}},U={class:"p-5 rounded-lg shadow-md"},q={class:"flex justify-between items-center mb-4"},D={class:"flex items-center gap-4"},L={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},M={key:0,class:"grid grid-cols-6 gap-4"},T=["src"],z=C({__name:"[id]",setup(_){const p=I(),e=F(),a=l(),d=l([]),t=l(""),r=l(0),m=l(!1),b=()=>{e.back()};$(async()=>{a.value=p.params.id?parseInt(p.params.id):null;const o=await(await fetch("/comics.json")).json();d.value=o;const n=d.value.find(u=>u.id===a.value);n&&(t.value=n.title,r.value=n.pages)});function v(){m.value=!0}return(s,o)=>{const n=E;return f(),g(h,null,[c("div",U,[c("div",q,[c("div",D,[c("button",{onClick:b,class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l mr-2"}," Go Back "),c("h1",L,j(i(t)),1)]),c("button",{class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:v}," Read ")]),i(r)?(f(),g("div",M,[(f(!0),g(h,null,N(i(r),u=>(f(),g("div",{class:"comic-page",key:u},[c("img",{src:`/comic/${i(a)}/${u}.jpg`,alt:"Comic Page",class:"w-full h-auto rounded-lg shadow"},null,8,T)]))),128))])):R("",!0)]),B(n,{comicId:i(a),initialPage:1,totalPages:i(r),visible:i(m),"onUpdate:visible":o[0]||(o[0]=u=>m.value=u)},null,8,["comicId","totalPages","visible"])],64)}}}),H=S(z,[["__scopeId","data-v-c5a09044"]]);export{H as default};
